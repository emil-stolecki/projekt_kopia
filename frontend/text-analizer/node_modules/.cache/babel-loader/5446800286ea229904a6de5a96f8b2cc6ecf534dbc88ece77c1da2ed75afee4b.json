{"ast":null,"code":"var _jsxFileName = \"/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/Home.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport ShortUniqueId from 'short-unique-id';\nimport '../css/home.css';\nimport Topbar from '../components/Topbar';\nimport Results from '../components/Results';\nimport Tutorial from '../components/Tutorial';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  //wpisany tekst\n  const [input, setInput] = useState('');\n  //otrzymana odpowiedź\n  const [data, setData] = useState([]);\n  //ewentualny błąd\n  const [error, setError] = useState([]);\n  //generator losowych kluczy\n  const storageKeyId = new ShortUniqueId({\n    length: 2\n  });\n  //tutorial\n  const [shouldTutorialRun, setShoulTutorialdRun] = useState(localStorage.getItem('tutorial') !== \"1\");\n  function updateTextArea(e) {\n    setInput(e.target.value);\n  }\n\n  //wysłanie tekstu do analizy\n  async function send(e) {\n    e.preventDefault();\n    if (input.length > 0 && input.length < 10000) {\n      document.body.style.cursor = 'wait';\n      try {\n        const response = await axios.post('http://localhost:8000/inference', {\n          text: input\n        });\n        setData(response.data);\n\n        //wpis do local storage\n        const date = new Date();\n        const random = storageKeyId.rnd();\n        const key = date.getMonth() + '-' + date.getDate() + '-' + random;\n        //t - tekst, r - wynik analizy, f - czy użytkownik przesłał już feedback dotyczący tej analizy \n        let record = {\n          t: input,\n          r: response.data,\n          f: 0\n        };\n        localStorage.setItem(key, JSON.stringify(record));\n\n        //jeśli wcześniej był błąd, to po udanym zapytnaiu zniknie\n        setError('');\n      } catch (error) {\n        setError(error.message);\n      }\n      document.body.style.cursor = 'default';\n    } else if (input.length == 0) {\n      setError('pole jest puste');\n    } else {\n      setError('przekroczono limit znaków - 10 000');\n    }\n  }\n  const content = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: 'input-txt',\n          value: input,\n          onChange: updateTextArea\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: 'input-btn',\n          className: \"send-button\",\n          onClick: send,\n          onRende: true,\n          children: \"Wy\\u015Blij\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Results, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clearfix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  };\n  const tutorial = () => {\n    if (shouldTutorialRun) {\n      return /*#__PURE__*/_jsxDEV(Tutorial, {\n        shouldRun: shouldTutorialRun,\n        onFinish: () => setShoulTutorialdRun(false),\n        other: {\n          'input': setInput,\n          'response': setData\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Topbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), () => {\n      return content();\n    }]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"3UsaBGqhaneexlFUFQTalVJxryw=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["axios","React","useState","useEffect","ShortUniqueId","Topbar","Results","Tutorial","jsxDEV","_jsxDEV","Home","_s","input","setInput","data","setData","error","setError","storageKeyId","length","shouldTutorialRun","setShoulTutorialdRun","localStorage","getItem","updateTextArea","e","target","value","send","preventDefault","document","body","style","cursor","response","post","text","date","Date","random","rnd","key","getMonth","getDate","record","t","r","f","setItem","JSON","stringify","message","content","className","children","id","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onRende","tutorial","shouldRun","onFinish","other","_c","$RefreshReg$"],"sources":["/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/Home.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport ShortUniqueId from 'short-unique-id';\nimport '../css/home.css';\nimport Topbar from '../components/Topbar';\nimport Results from '../components/Results';\nimport Tutorial from '../components/Tutorial';\n\nexport default function Home(){\n  //wpisany tekst\n  const [input, setInput]=useState('')\n  //otrzymana odpowiedź\n  const [data, setData] = useState([]);\n  //ewentualny błąd\n  const [error, setError] = useState([]);\n  //generator losowych kluczy\n  const storageKeyId = new ShortUniqueId({ length: 2 });\n  //tutorial\n  const [shouldTutorialRun,setShoulTutorialdRun] = useState(localStorage.getItem('tutorial')!==\"1\")\n\nfunction updateTextArea(e){\n  setInput(e.target.value)\n}\n\n\n//wysłanie tekstu do analizy\nasync function send(e){ \n    e.preventDefault()\n    if(input.length>0 && input.length<10000){\n      document.body.style.cursor = 'wait'     \n      try {\n        const response = await axios.post('http://localhost:8000/inference',{text:input});\n        setData(response.data);\n\n        //wpis do local storage\n        const date = new Date()\n        const random = storageKeyId.rnd()\n        const key = date.getMonth() + '-' + date.getDate() +'-'+ random\n        //t - tekst, r - wynik analizy, f - czy użytkownik przesłał już feedback dotyczący tej analizy \n        let record = {t:input,r:response.data, f:0}\n        localStorage.setItem(key, JSON.stringify(record))    \n\n        //jeśli wcześniej był błąd, to po udanym zapytnaiu zniknie\n        setError('')\n      } catch (error) {\n        setError(error.message);\n      }\n      document.body.style.cursor = 'default'\n    }\n    else if(input.length==0){\n      setError('pole jest puste')\n    }\n    else{\n      setError('przekroczono limit znaków - 10 000')\n    }\n}\n\n\n const content = ()=>{\n    return(\n      <div className='content'>\n        <div className='input'>\n        <textarea id={'input-txt'} value={input}onChange={updateTextArea}></textarea>\n        <br/>\n        <button id={'input-btn'}className='send-button' onClick={send} onRende>Wyślij</button>\n        <br/>\n        {error&&<p>{error}</p>}\n        \n        </div>\n        <Results data={data}/>\n        <div className='clearfix'></div>\n        \n      </div>\n    )\n } \n\n const tutorial = ()=>{\n    if(shouldTutorialRun){\n      return(\n        <Tutorial shouldRun={shouldTutorialRun} onFinish={()=>setShoulTutorialdRun(false)} \n         other={{'input':setInput,'response':setData}}/>\n      )\n    }\n    \n }\n\n  return (\n    <div className=\"App\">    \n      <Topbar/>\n      {()=>{return content()}}\n      {      }\n      \n      \n    </div>\n  );\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}