{"ast":null,"code":"var _jsxFileName = \"/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/History.js\",\n  _s = $RefreshSig$();\nimport ShortUniqueId from 'short-unique-id';\nimport React, { useState } from 'react';\nimport '../css/history.css';\nimport { useNavigate } from 'react-router-dom';\nimport HistoryElement from '../components/HistoryElement';\nimport Topbar from '../components/Topbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function History() {\n  _s();\n  const navigate = useNavigate();\n  //zapisy poprzednich analiz z localstorage\n  const [items, updateItems] = useState(Object.entries({\n    ...localStorage\n  }));\n  //czy została wywołana funkcja zaznaczająca wszystkie pozycje? albo odznaczająca?\n  const [selectedAll, setselectedAll] = useState(false);\n  //lista stanów zaznaczenia wszystkich elementów\n  const [selected, setSelected] = useState([]);\n\n  //funkcja obliczająca zajęte miejsce w local storage na podstawie ilości znaków\n  const calculateUsedSpace = () => {\n    let allStrings = '';\n    for (let i = 0; i < items.length; i++) {\n      allStrings += items[i][0] + items[i][1];\n    }\n    //1 bajt = 8 bitów\n    //1 znak = 16 bitów = 2 bajty \n    //1KB = 1024 bajty   \n    return allStrings.length * 2 / 1024 / 1024;\n  };\n\n  //obecna zajętość pamięci\n  const [usedSpace, setUsedSpace] = useState(calculateUsedSpace);\n\n  //funkcja przekazana do wszystkich elementów, aktualizująca stan zaznaczenia\n  function handleChange(key, value) {\n    if (value) {\n      setSelected([...selected, key]);\n    } else {\n      setSelected(selected.filter(item => item !== key));\n    }\n  }\n  ;\n\n  //zaznacza lub odznacza wszystkie pozycja\n  function selectDeselectAll() {\n    const state = selectedAll;\n    if (state) {\n      setSelected([]);\n      setselectedAll(false);\n    } else {\n      setSelected(Object.keys({\n        ...localStorage\n      }));\n      setselectedAll(true);\n    }\n  }\n\n  //usuwa zaznaczone elementy\n  function deleteSelected() {\n    selected.forEach(key => localStorage.removeItem(key));\n    updateItems(Object.entries({\n      ...localStorage\n    }));\n    setUsedSpace(calculateUsedSpace);\n  }\n\n  //przekieruje do strony do przesyłania opinii z zaznaczonymi elementami\n  function sendFeedback() {\n    navigate(`/feedback?keys=${encodeURIComponent(selected)}`);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Topbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: selectDeselectAll,\n        children: selectedAll ? 'Odznacz wszystko' : 'Zaznacz wszystko'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: deleteSelected,\n        children: \"Usu\\u0144 zaznaczone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: sendFeedback,\n        children: \"Prze\\u015Blij opini\\u0119\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: 'zajęte miejsce: ' + usedSpace.toFixed(3) + ' MB'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clearfix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: items.map(x => /*#__PURE__*/_jsxDEV(HistoryElement, {\n          record_key: x[0],\n          value: x[1],\n          selected: selected.includes(x[0]),\n          handleChange: handleChange\n        }, x[0], false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 37\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n_s(History, \"hn+QpGOC6pk2dqUhx5iG0rlGj8o=\", false, function () {\n  return [useNavigate];\n});\n_c = History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["ShortUniqueId","React","useState","useNavigate","HistoryElement","Topbar","jsxDEV","_jsxDEV","History","_s","navigate","items","updateItems","Object","entries","localStorage","selectedAll","setselectedAll","selected","setSelected","calculateUsedSpace","allStrings","i","length","usedSpace","setUsedSpace","handleChange","key","value","filter","item","selectDeselectAll","state","keys","deleteSelected","forEach","removeItem","sendFeedback","encodeURIComponent","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","toFixed","map","x","record_key","includes","_c","$RefreshReg$"],"sources":["/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/History.js"],"sourcesContent":["import ShortUniqueId from 'short-unique-id';\nimport React, { useState} from 'react';\nimport '../css/history.css'\nimport { useNavigate } from 'react-router-dom';\nimport HistoryElement from '../components/HistoryElement';\nimport Topbar from '../components/Topbar';\n\nexport default function History(){\n\n    const navigate = useNavigate();\n    //zapisy poprzednich analiz z localstorage\n    const [items,updateItems] = useState(\n        Object.entries({ ...localStorage }));\n    //czy została wywołana funkcja zaznaczająca wszystkie pozycje? albo odznaczająca?\n    const [selectedAll,setselectedAll] = useState(false)\n    //lista stanów zaznaczenia wszystkich elementów\n    const [selected,setSelected] = useState([])\n\n    //funkcja obliczająca zajęte miejsce w local storage na podstawie ilości znaków\n    const calculateUsedSpace = () => {\n        let allStrings = '';\n        for (let i=0; i<items.length; i++) {\n          \n          allStrings += (items[i][0]+items[i][1]);\n        }\n        //1 bajt = 8 bitów\n        //1 znak = 16 bitów = 2 bajty \n        //1KB = 1024 bajty   \n        return ((allStrings.length * 2) / 1024 / 1024);\n    };\n\n    //obecna zajętość pamięci\n    const [usedSpace,setUsedSpace] = useState(calculateUsedSpace)\n    \n    //funkcja przekazana do wszystkich elementów, aktualizująca stan zaznaczenia\n    function handleChange(key,value){\n        if (value) {\n            setSelected([...selected, key]);\n        } else {\n            setSelected(selected.filter((item) => item !== key));\n        }\n    };\n\n    //zaznacza lub odznacza wszystkie pozycja\n    function selectDeselectAll(){\n        const state = selectedAll\n        if (state) {\n            setSelected([])\n            setselectedAll(false)\n        }\n        else {\n            setSelected(Object.keys({ ...localStorage }))\n            setselectedAll(true)\n        }\n    }\n\n    //usuwa zaznaczone elementy\n    function deleteSelected(){\n        selected.forEach((key) => localStorage.removeItem(key))\n        updateItems(Object.entries({ ...localStorage }))\n        setUsedSpace(calculateUsedSpace)\n    }\n\n    //przekieruje do strony do przesyłania opinii z zaznaczonymi elementami\n    function sendFeedback(){\n        navigate(`/feedback?keys=${encodeURIComponent(selected)}`)\n    }\n\n    return(\n        <div className='App'>\n            <Topbar/>\n            <div className='menu'>\n                <button className=\"menu-button\" onClick={selectDeselectAll}>{selectedAll?'Odznacz wszystko':'Zaznacz wszystko'}</button>\n                <button className=\"menu-button\" onClick={deleteSelected}>Usuń zaznaczone</button>\n                <button className=\"menu-button\" onClick={sendFeedback}>Prześlij opinię</button>\n                <p>{'zajęte miejsce: ' + usedSpace.toFixed(3) + ' MB'}</p>\n                <div className='clearfix'></div>\n            </div>\n            <div className='content'>\n                <ul>\n                    {items.map((x)=><HistoryElement key={x[0]} record_key={x[0]} value={x[1]} \n                    selected={selected.includes(x[0])} handleChange={handleChange}/>)}\n                </ul>\n                \n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}