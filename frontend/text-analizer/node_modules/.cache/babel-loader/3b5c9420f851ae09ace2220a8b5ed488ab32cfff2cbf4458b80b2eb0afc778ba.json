{"ast":null,"code":"var _jsxFileName = \"/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/History.js\",\n  _s = $RefreshSig$();\nimport ShortUniqueId from 'short-unique-id';\nimport React, { useState } from 'react';\nimport '../css/history.css';\nimport { useNavigate } from 'react-router-dom';\nimport HistoryElement from '../components/HistoryElement';\nimport Topbar from '../components/Topbar';\nimport Tutorial from '../components/Tutorial';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function History() {\n  _s();\n  const navigate = useNavigate();\n  //zapisy poprzednich analiz z localstorage\n  const [items, updateItems] = useState(Object.entries({\n    ...localStorage\n  }).filter(([k, v]) => /\\d{1,2}-\\d{1,2}-[A-Za-z\\d]/g.test(k)));\n  //czy została wywołana funkcja zaznaczająca wszystkie pozycje? albo odznaczająca?\n  const [selectedAll, setselectedAll] = useState(false);\n  //lista stanów zaznaczenia wszystkich elementów\n  const [selected, setSelected] = useState([]);\n  const [shouldTutorialRun, setShoulTutorialdRun] = useState(localStorage.getItem('tutorial') !== \"ok\"); //ok znaczy, że tutorial został ukończony lub pominięty\n  //funkcja obliczająca zajęte miejsce w local storage na podstawie ilości znaków\n  const calculateUsedSpace = () => {\n    console.log({\n      ...localStorage\n    });\n    console.log();\n    console.log(items);\n    let allStrings = '';\n    for (let i = 0; i < items.length; i++) {\n      allStrings += items[i][0] + items[i][1];\n    }\n    //1 znak  = 2 bajty \n    //1KB = 1024 bajty, 1MB = 1024 KB\n    return allStrings.length * 2 / 1024 / 1024;\n  };\n\n  //obecna zajętość pamięci\n  const [usedSpace, setUsedSpace] = useState(calculateUsedSpace);\n\n  //funkcja przekazana do wszystkich elementów, aktualizująca stan zaznaczenia\n  function handleChange(key, value) {\n    if (value) {\n      setSelected([...selected, key]);\n    } else {\n      setSelected(selected.filter(item => item !== key));\n    }\n  }\n  ;\n\n  //zaznacza lub odznacza wszystkie pozycja\n  function selectDeselectAll() {\n    const state = selectedAll;\n    if (state) {\n      setSelected([]);\n      setselectedAll(false);\n    } else {\n      setSelected(Object.keys({\n        ...localStorage\n      }).filter(k => /\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)));\n      setselectedAll(true);\n    }\n  }\n\n  //usuwa zaznaczone elementy\n  function deleteSelected() {\n    selected.forEach(key => localStorage.removeItem(key));\n    updateItems(Object.entries({\n      ...localStorage\n    }).filter(([k, v]) => /\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)));\n    setUsedSpace(calculateUsedSpace);\n  }\n\n  //przekieruje do strony do przesyłania opinii z zaznaczonymi elementami\n  function sendFeedback() {\n    navigate(`/feedback?keys=${encodeURIComponent(selected)}`);\n  }\n  function onTutorialFinish() {\n    setShoulTutorialdRun(false);\n    updateItems(Object.entries({\n      ...localStorage\n    }).filter(([k, v]) => /\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)));\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Topbar, {\n      disabled: shouldTutorialRun\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: selectDeselectAll,\n        disabled: shouldTutorialRun,\n        children: [selectedAll ? 'Odznacz wszystko' : 'Zaznacz wszystko', \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: deleteSelected,\n        disabled: shouldTutorialRun,\n        children: \"Usu\\u0144 zaznaczone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: sendFeedback,\n        disabled: shouldTutorialRun,\n        children: \"Prze\\u015Blij opini\\u0119\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: 'zajęte miejsce: ' + usedSpace.toFixed(3) + ' MB'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clearfix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: items.map(x => /*#__PURE__*/_jsxDEV(HistoryElement, {\n          record_key: x[0],\n          value: x[1],\n          selected: selected.includes(x[0]),\n          handleChange: handleChange,\n          disabled: shouldTutorialRun\n        }, x[0], false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 37\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), shouldTutorialRun && /*#__PURE__*/_jsxDEV(Tutorial, {\n      shouldRun: shouldTutorialRun,\n      onFinish: onTutorialFinish,\n      other: {\n        updateitems: updateItems\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 35\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(History, \"6kIt6c3SvCK/n45Xg1umpGh3Utw=\", false, function () {\n  return [useNavigate];\n});\n_c = History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["ShortUniqueId","React","useState","useNavigate","HistoryElement","Topbar","Tutorial","jsxDEV","_jsxDEV","History","_s","navigate","items","updateItems","Object","entries","localStorage","filter","k","v","test","selectedAll","setselectedAll","selected","setSelected","shouldTutorialRun","setShoulTutorialdRun","getItem","calculateUsedSpace","console","log","allStrings","i","length","usedSpace","setUsedSpace","handleChange","key","value","item","selectDeselectAll","state","keys","deleteSelected","forEach","removeItem","sendFeedback","encodeURIComponent","onTutorialFinish","className","children","disabled","fileName","_jsxFileName","lineNumber","columnNumber","onClick","toFixed","map","x","record_key","includes","shouldRun","onFinish","other","updateitems","_c","$RefreshReg$"],"sources":["/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/History.js"],"sourcesContent":["import ShortUniqueId from 'short-unique-id';\nimport React, { useState} from 'react';\nimport '../css/history.css'\nimport { useNavigate } from 'react-router-dom';\nimport HistoryElement from '../components/HistoryElement';\nimport Topbar from '../components/Topbar';\nimport Tutorial from '../components/Tutorial';\n\nexport default function History(){\n    \n    const navigate = useNavigate();\n    //zapisy poprzednich analiz z localstorage\n    const [items,updateItems] = useState(\n        Object.entries({...localStorage})\n        .filter(([k,v])=>/\\d{1,2}-\\d{1,2}-[A-Za-z\\d]/g.test(k)));\n    //czy została wywołana funkcja zaznaczająca wszystkie pozycje? albo odznaczająca?\n    const [selectedAll,setselectedAll] = useState(false)\n    //lista stanów zaznaczenia wszystkich elementów\n    const [selected,setSelected] = useState([])\n    const [shouldTutorialRun,setShoulTutorialdRun] = useState(localStorage.getItem('tutorial')!==\"ok\")//ok znaczy, że tutorial został ukończony lub pominięty\n    //funkcja obliczająca zajęte miejsce w local storage na podstawie ilości znaków\n    const calculateUsedSpace = () => {\n        console.log({...localStorage})\n        console.log()\n        console.log(items)\n        let allStrings = '';\n        for (let i=0; i<items.length; i++) {\n          \n          allStrings += (items[i][0]+items[i][1]);\n        }\n        //1 znak  = 2 bajty \n        //1KB = 1024 bajty, 1MB = 1024 KB\n        return ((allStrings.length * 2) / 1024 / 1024);\n    };\n\n    //obecna zajętość pamięci\n    const [usedSpace,setUsedSpace] = useState(calculateUsedSpace)\n    \n    //funkcja przekazana do wszystkich elementów, aktualizująca stan zaznaczenia\n    function handleChange(key,value){\n        if (value) {\n            setSelected([...selected, key]);\n        } else {\n            setSelected(selected.filter((item) => item !== key));\n        }\n    };\n\n    //zaznacza lub odznacza wszystkie pozycja\n    function selectDeselectAll(){\n        const state = selectedAll\n        if (state) {\n            setSelected([])\n            setselectedAll(false)\n        }\n        else {\n            setSelected(Object.keys({ ...localStorage }).filter((k)=>/\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)))\n            setselectedAll(true)\n        }\n    }\n\n    //usuwa zaznaczone elementy\n    function deleteSelected(){\n        selected.forEach((key) => localStorage.removeItem(key))\n        updateItems(Object.entries({ ...localStorage }).filter(([k,v])=>/\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)))\n        setUsedSpace(calculateUsedSpace)\n    }\n\n    //przekieruje do strony do przesyłania opinii z zaznaczonymi elementami\n    function sendFeedback(){\n        navigate(`/feedback?keys=${encodeURIComponent(selected)}`)\n    }\n    function onTutorialFinish(){\n        setShoulTutorialdRun(false)\n        updateItems(Object.entries({...localStorage})\n        .filter(([k,v])=>/\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)))\n\n    }\n    return(\n        <div className='App'>\n            <Topbar disabled={shouldTutorialRun}/>\n            <div className='menu'>\n                <button className=\"menu-button\" onClick={selectDeselectAll} disabled={shouldTutorialRun} >{selectedAll?'Odznacz wszystko':'Zaznacz wszystko'} </button>\n                <button className=\"menu-button\" onClick={deleteSelected} disabled={shouldTutorialRun} >Usuń zaznaczone</button>\n                <button className=\"menu-button\" onClick={sendFeedback} disabled={shouldTutorialRun} >Prześlij opinię</button>\n                <p>{'zajęte miejsce: ' + usedSpace.toFixed(3) + ' MB'}</p>\n                <div className='clearfix'></div>\n            </div>\n            <div className='content'>\n                <ul>\n                    {items.map((x)=><HistoryElement key={x[0]} record_key={x[0]} value={x[1]} \n                    selected={selected.includes(x[0])} handleChange={handleChange} disabled={shouldTutorialRun}/>)}\n                </ul>\n                \n            </div>\n            {shouldTutorialRun && <Tutorial shouldRun={shouldTutorialRun} onFinish={onTutorialFinish} \n         other={{updateitems:updateItems}}/>}\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}