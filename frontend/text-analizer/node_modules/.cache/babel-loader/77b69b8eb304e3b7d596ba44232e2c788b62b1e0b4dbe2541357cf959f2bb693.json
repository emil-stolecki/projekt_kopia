{"ast":null,"code":"var _jsxFileName = \"/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/History.js\",\n  _s = $RefreshSig$();\nimport ShortUniqueId from 'short-unique-id';\nimport React, { useState } from 'react';\nimport '../css/history.css';\nimport { useNavigate } from 'react-router-dom';\nimport HistoryElement from '../components/HistoryElement';\nimport Topbar from '../components/Topbar';\nimport Tutorial from '../components/Tutorial';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function History() {\n  _s();\n  const navigate = useNavigate();\n  //zapisy poprzednich analiz z localstorage\n  const pattern = /^\\d{1,2}-\\d{1,2}-/g;\n  const [items, updateItems] = useState(Object.entries({\n    ...localStorage\n  }).filter(([k, v]) => pattern.test(k)));\n  //czy została wywołana funkcja zaznaczająca wszystkie pozycje? albo odznaczająca?\n  const [selectedAll, setselectedAll] = useState(false);\n  //lista stanów zaznaczenia wszystkich elementów\n  const [selected, setSelected] = useState([]);\n  const [shouldTutorialRun, setShoulTutorialdRun] = useState(localStorage.getItem('tutorial') !== \"ok\"); //ok znaczy, że tutorial został ukończony lub pominięty\n  //funkcja obliczająca zajęte miejsce w local storage na podstawie ilości znaków\n  const calculateUsedSpace = () => {\n    console.log({\n      ...localStorage\n    });\n    console.log();\n    console.log(items);\n    console.log();\n    Object.entries({\n      ...localStorage\n    }).forEach((k, v) => {\n      console.log(k);\n      console.log(pattern.test(k));\n    });\n    let allStrings = '';\n    for (let i = 0; i < items.length; i++) {\n      allStrings += items[i][0] + items[i][1];\n    }\n    //1 znak  = 2 bajty \n    //1KB = 1024 bajty, 1MB = 1024 KB\n    return allStrings.length * 2 / 1024 / 1024;\n  };\n\n  //obecna zajętość pamięci\n  const [usedSpace, setUsedSpace] = useState(calculateUsedSpace);\n\n  //funkcja przekazana do wszystkich elementów, aktualizująca stan zaznaczenia\n  function handleChange(key, value) {\n    if (value) {\n      setSelected([...selected, key]);\n    } else {\n      setSelected(selected.filter(item => item !== key));\n    }\n  }\n  ;\n\n  //zaznacza lub odznacza wszystkie pozycja\n  function selectDeselectAll() {\n    const state = selectedAll;\n    if (state) {\n      setSelected([]);\n      setselectedAll(false);\n    } else {\n      setSelected(Object.keys({\n        ...localStorage\n      }).filter(k => pattern.test(k)));\n      setselectedAll(true);\n    }\n  }\n\n  //usuwa zaznaczone elementy\n  function deleteSelected() {\n    selected.forEach(key => localStorage.removeItem(key));\n    updateItems(Object.entries({\n      ...localStorage\n    }).filter(([k, v]) => pattern.test(k)));\n    setUsedSpace(calculateUsedSpace);\n  }\n\n  //przekieruje do strony do przesyłania opinii z zaznaczonymi elementami\n  function sendFeedback() {\n    navigate(`/feedback?keys=${encodeURIComponent(selected)}`);\n  }\n  function onTutorialFinish() {\n    setShoulTutorialdRun(false);\n    updateItems(Object.entries({\n      ...localStorage\n    }).filter(([k, v]) => pattern.test(k)));\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Topbar, {\n      disabled: shouldTutorialRun\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: selectDeselectAll,\n        disabled: shouldTutorialRun,\n        children: [selectedAll ? 'Odznacz wszystko' : 'Zaznacz wszystko', \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: deleteSelected,\n        disabled: shouldTutorialRun,\n        children: \"Usu\\u0144 zaznaczone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: sendFeedback,\n        disabled: shouldTutorialRun,\n        children: \"Prze\\u015Blij opini\\u0119\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: 'zajęte miejsce: ' + usedSpace.toFixed(3) + ' MB'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clearfix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: items.map(x => /*#__PURE__*/_jsxDEV(HistoryElement, {\n          record_key: x[0],\n          value: x[1],\n          selected: selected.includes(x[0]),\n          handleChange: handleChange,\n          disabled: shouldTutorialRun\n        }, x[0], false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 37\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), shouldTutorialRun && /*#__PURE__*/_jsxDEV(Tutorial, {\n      shouldRun: shouldTutorialRun,\n      onFinish: onTutorialFinish,\n      other: {\n        updateitems: updateItems\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 35\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n}\n_s(History, \"WkMNRHyYaKHTG3zSEUT34WZXDzQ=\", false, function () {\n  return [useNavigate];\n});\n_c = History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["ShortUniqueId","React","useState","useNavigate","HistoryElement","Topbar","Tutorial","jsxDEV","_jsxDEV","History","_s","navigate","pattern","items","updateItems","Object","entries","localStorage","filter","k","v","test","selectedAll","setselectedAll","selected","setSelected","shouldTutorialRun","setShoulTutorialdRun","getItem","calculateUsedSpace","console","log","forEach","allStrings","i","length","usedSpace","setUsedSpace","handleChange","key","value","item","selectDeselectAll","state","keys","deleteSelected","removeItem","sendFeedback","encodeURIComponent","onTutorialFinish","className","children","disabled","fileName","_jsxFileName","lineNumber","columnNumber","onClick","toFixed","map","x","record_key","includes","shouldRun","onFinish","other","updateitems","_c","$RefreshReg$"],"sources":["/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/History.js"],"sourcesContent":["import ShortUniqueId from 'short-unique-id';\nimport React, { useState} from 'react';\nimport '../css/history.css'\nimport { useNavigate } from 'react-router-dom';\nimport HistoryElement from '../components/HistoryElement';\nimport Topbar from '../components/Topbar';\nimport Tutorial from '../components/Tutorial';\n\nexport default function History(){\n    \n    const navigate = useNavigate();\n    //zapisy poprzednich analiz z localstorage\n    const pattern = /^\\d{1,2}-\\d{1,2}-/g\n    const [items,updateItems] = useState(\n        Object.entries({...localStorage})\n        .filter(([k,v])=>pattern.test(k)));\n    //czy została wywołana funkcja zaznaczająca wszystkie pozycje? albo odznaczająca?\n    const [selectedAll,setselectedAll] = useState(false)\n    //lista stanów zaznaczenia wszystkich elementów\n    const [selected,setSelected] = useState([])\n    const [shouldTutorialRun,setShoulTutorialdRun] = useState(localStorage.getItem('tutorial')!==\"ok\")//ok znaczy, że tutorial został ukończony lub pominięty\n    //funkcja obliczająca zajęte miejsce w local storage na podstawie ilości znaków\n    const calculateUsedSpace = () => {\n        console.log({...localStorage})\n        console.log()\n        console.log(items)\n        console.log()\n        Object.entries({...localStorage}).forEach(\n            (k,v)=>{\n                console.log(k)\n                console.log(pattern.test(k))\n            }\n        )\n        let allStrings = '';\n        for (let i=0; i<items.length; i++) {\n          \n          allStrings += (items[i][0]+items[i][1]);\n        }\n        //1 znak  = 2 bajty \n        //1KB = 1024 bajty, 1MB = 1024 KB\n        return ((allStrings.length * 2) / 1024 / 1024);\n    };\n\n    //obecna zajętość pamięci\n    const [usedSpace,setUsedSpace] = useState(calculateUsedSpace)\n    \n    //funkcja przekazana do wszystkich elementów, aktualizująca stan zaznaczenia\n    function handleChange(key,value){\n        if (value) {\n            setSelected([...selected, key]);\n        } else {\n            setSelected(selected.filter((item) => item !== key));\n        }\n    };\n\n    //zaznacza lub odznacza wszystkie pozycja\n    function selectDeselectAll(){\n        const state = selectedAll\n        if (state) {\n            setSelected([])\n            setselectedAll(false)\n        }\n        else {\n            setSelected(Object.keys({ ...localStorage }).filter((k)=>pattern.test(k)))\n            setselectedAll(true)\n        }\n    }\n\n    //usuwa zaznaczone elementy\n    function deleteSelected(){\n        selected.forEach((key) => localStorage.removeItem(key))\n        updateItems(Object.entries({ ...localStorage }).filter(([k,v])=>pattern.test(k)))\n        setUsedSpace(calculateUsedSpace)\n    }\n\n    //przekieruje do strony do przesyłania opinii z zaznaczonymi elementami\n    function sendFeedback(){\n        navigate(`/feedback?keys=${encodeURIComponent(selected)}`)\n    }\n    function onTutorialFinish(){\n        setShoulTutorialdRun(false)\n        updateItems(Object.entries({...localStorage})\n        .filter(([k,v])=>pattern.test(k)))\n\n    }\n    return(\n        <div className='App'>\n            <Topbar disabled={shouldTutorialRun}/>\n            <div className='menu'>\n                <button className=\"menu-button\" onClick={selectDeselectAll} disabled={shouldTutorialRun} >{selectedAll?'Odznacz wszystko':'Zaznacz wszystko'} </button>\n                <button className=\"menu-button\" onClick={deleteSelected} disabled={shouldTutorialRun} >Usuń zaznaczone</button>\n                <button className=\"menu-button\" onClick={sendFeedback} disabled={shouldTutorialRun} >Prześlij opinię</button>\n                <p>{'zajęte miejsce: ' + usedSpace.toFixed(3) + ' MB'}</p>\n                <div className='clearfix'></div>\n            </div>\n            <div className='content'>\n                <ul>\n                    {items.map((x)=><HistoryElement key={x[0]} record_key={x[0]} value={x[1]} \n                    selected={selected.includes(x[0])} handleChange={handleChange} disabled={shouldTutorialRun}/>)}\n                </ul>\n                \n            </div>\n            {shouldTutorialRun && <Tutorial shouldRun={shouldTutorialRun} onFinish={onTutorialFinish} \n         other={{updateitems:updateItems}}/>}\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}