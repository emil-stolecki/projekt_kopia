{"ast":null,"code":"var _jsxFileName = \"/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/Feedback.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Topbar from \"../components/Topbar\";\nimport '../css/feedback.css';\nimport ReferenceListElement from '../components/ReferenceListElement';\nimport LabelCorrection from '../components/LabelCorrection';\nimport labels from '../labels.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Feedback() {\n  _s();\n  const location = useLocation();\n  //ewentualne zaznaczone wcześniej zapisy\n  const listOfkeys = new URLSearchParams(location.search).get('keys');\n  //wszystkie elementy z localstorage\n  const items = Object.fromEntries(Object.entries({\n    ...localStorage\n  }).filter(([k, v]) => /\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)) //tylko elementy reprezentujące analizę tekstu\n  .map(([key, value]) => [key, JSON.parse(value)]));\n\n  //niedodane do opinni zapisy\n  //domyślnie wszystkie elementy z items, ale jeśli było przekierowanie z /history\n  //lista będzie pomnijeszona o wybrane elementy\n  const [itemsToAdd, setItemsToAdd] = useState(listOfkeys == undefined ? Object.entries(items) : Object.entries(items).filter(([key, val]) => !listOfkeys.includes(key)));\n\n  //zapisy, których ma dotyczyć opinia\n  //domyślnie pusta lista, ale jeśli było przekierowanie z /history\n  //lista będzie zawierać wybrane elementy\n  const [addedItems, setAddedItems] = useState(listOfkeys == undefined ? [] : Object.entries(items).filter(([key, val]) => listOfkeys.includes(key)));\n\n  //poprawione przez użytkownika wyniki\n  const [selectedEmotions, setSelectedEmotions] = useState([]);\n  const [selectedlanguage, setSelectedLanguage] = useState([]);\n  const [selectedToxic, setSelectedToxic] = useState([]);\n  const [selectedSentiment, setSelectedSentiment] = useState([]);\n\n  //komentarz od użytkownika\n  const [inputText, setInpuText] = useState('');\n\n  //odpowiedź od serwera\n  const [status, setStatus] = useState({});\n\n  //przesłanie opinii\n  async function send(e) {\n    e.preventDefault();\n    document.body.style.cursor = 'wait';\n    if (addedItems.length > 0) {\n      const feedback = {\n        references: addedItems.map(x => {\n          return {\n            text: x[1].t,\n            results: x[1].r\n          };\n        }),\n        opinion: inputText,\n        corrected: {\n          toxic: selectedToxic,\n          sentiment: selectedSentiment,\n          emotion: selectedEmotions,\n          language: selectedlanguage\n        }\n      };\n      try {\n        const response = await axios.post('http://localhost:8000/save-feedback', feedback);\n        setStatus(response.data);\n        addedItems.forEach(item => {\n          item[1].f = 1;\n          localStorage.setItem(item[0], JSON.stringify(item[1]));\n        });\n      } catch (error) {\n        setStatus({\n          success: false,\n          message: error.message\n        });\n      }\n    } else {\n      setStatus({\n        success: false,\n        message: 'nie zaznaczono tekstu'\n      });\n    }\n    document.body.style.cursor = 'default';\n  }\n\n  //ustawienie wyników klasyfikacji na takie, jakie zostały orginalnie otrzymane\n  //trzeba je zmienić za każdym razem, kiedy na liście analiz do recenzji znajdzie się\n  //tylko jeden element \n  function setInitialState(list) {\n    setSelectedEmotions(list[1].r.emotions ? list[1].r.emotions.filter(x => x[1] > 0.1).map(x => x[0]) : []);\n    setSelectedLanguage(list[1].r.language[0][0]);\n    setSelectedSentiment(list[1].r.sentiment[0][0]);\n    setSelectedToxic(list[1].r.toxic > 0.5 ? 'toxic' : 'non-toxic');\n  }\n\n  //jeśli był wybrany jeden element z historii, a następnie przekierowanie do /feedback\n  //trzeba ustawić jego wyniki klasyfikacji\n  useEffect(() => {\n    if (listOfkeys != undefined) {\n      if (listOfkeys.length === 1) {\n        setInitialState(addedItems[0]);\n      }\n    }\n  }, []);\n\n  //użytkownik wybiera element z listy dotychczasowych analiz\n  function handlePick(e) {\n    const key = e.target.value;\n    const len = addedItems.length;\n    setAddedItems([...addedItems, [key, items[key]]]);\n    setItemsToAdd(itemsToAdd.filter(x => x[0] !== key));\n    if (len + 1 === 1) {\n      setInitialState([key, items[key]]);\n    }\n  }\n  ;\n\n  //użytkownik usuwa element z listy analiz do recenzji\n  function handleremove(key) {\n    const len = addedItems.length;\n    const newList = addedItems.filter(x => x[0] !== key);\n    setItemsToAdd([...itemsToAdd, [key, items[key]]]);\n    setAddedItems(newList);\n    if (len - 1 === 1) {\n      setInitialState(newList[0]);\n    }\n  }\n  ;\n\n  //do korekty emocji - zaznaczenie lub odznaczenie elementu z listy emocji, które powinny być\n  //wynikiem analizy, ale zostały błędnie wybrane lub pominięte\n  function handleCheckbox(key, value) {\n    if (value) {\n      setSelectedEmotions([...selectedEmotions, key]);\n    } else {\n      setSelectedEmotions(selectedEmotions.filter(item => item !== key));\n    }\n  }\n  ;\n  const textListStyle = [{\n    color: 'black'\n  }, {\n    color: '#505050'\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Topbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-left\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reference\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"text-list\",\n            onChange: handlePick,\n            size: 5,\n            children: itemsToAdd.map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: x[0],\n              style: textListStyle[x[1].f],\n              children: x[1].t.slice(0, 70) + '...'\n            }, x[0], false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 50\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: addedItems.map(x => /*#__PURE__*/_jsxDEV(ReferenceListElement, {\n              text: x[1].t,\n              record_key: x[0],\n              onRemove: handleremove\n            }, x[0], false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 50\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-right\",\n        children: [addedItems.length === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"correction\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"klasyfikacja: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"label-correction\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"kategoria\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 66\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"klasyfikacja\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 84\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"korekcja\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 105\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(LabelCorrection, {\n                category: \"language\",\n                label: addedItems[0][1].r.language[0][0],\n                labels: labels.language,\n                multichoice: false,\n                handleChange: setSelectedLanguage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(LabelCorrection, {\n                category: \"toxic?\",\n                label: addedItems[0][1].r.toxic > 0.5 ? 'toxic' : 'non-toxic',\n                labels: labels.toxic,\n                multichoice: false,\n                handleChange: setSelectedToxic\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(LabelCorrection, {\n                category: \"sentiment\",\n                label: addedItems[0][1].r.sentiment[0][0],\n                labels: labels.sentiment,\n                multichoice: false,\n                handleChange: setSelectedSentiment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(LabelCorrection, {\n                category: \"emotion\",\n                label: addedItems[0][1].r.emotions ? addedItems[0][1].r.emotions.filter(x => x[1] > 0.1).map(x => x[0]) : [],\n                labels: labels.emotion,\n                multichoice: true,\n                handleChange: handleCheckbox,\n                selected: selectedEmotions\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this), addedItems.length !== 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"correction\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Dla zaznaczonego jednego elementu mo\\u017Cna zasugerowa\\u0107 bardziej pasuj\\u0105ce klasyfikacje. Je\\u015Bli chcesz przes\\u0142a\\u0107 opini\\u0119 dotycz\\u0105c\\u0105 kilku tekst\\xF3w, mo\\u017Cesz p\\xF3\\u017Aniej poprawi\\u0107 ka\\u017Cdy z nich z osobna.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"opinion\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Komentarz:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: inputText,\n            onChange: e => setInpuText(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          onClick: send,\n          children: \"send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: status.message && status.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clearfix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 9\n  }, this);\n}\n_s(Feedback, \"+e57Fgay40NAfaUFyTLvGOMof/0=\", false, function () {\n  return [useLocation];\n});\n_c = Feedback;\nvar _c;\n$RefreshReg$(_c, \"Feedback\");","map":{"version":3,"names":["axios","React","useEffect","useState","useLocation","Topbar","ReferenceListElement","LabelCorrection","labels","jsxDEV","_jsxDEV","Feedback","_s","location","listOfkeys","URLSearchParams","search","get","items","Object","fromEntries","entries","localStorage","filter","k","v","test","map","key","value","JSON","parse","itemsToAdd","setItemsToAdd","undefined","val","includes","addedItems","setAddedItems","selectedEmotions","setSelectedEmotions","selectedlanguage","setSelectedLanguage","selectedToxic","setSelectedToxic","selectedSentiment","setSelectedSentiment","inputText","setInpuText","status","setStatus","send","e","preventDefault","document","body","style","cursor","length","feedback","references","x","text","t","results","r","opinion","corrected","toxic","sentiment","emotion","language","response","post","data","forEach","item","f","setItem","stringify","error","success","message","setInitialState","list","emotions","handlePick","target","len","handleremove","newList","handleCheckbox","textListStyle","color","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","size","slice","record_key","onRemove","category","label","multichoice","handleChange","selected","onClick","_c","$RefreshReg$"],"sources":["/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/Feedback.js"],"sourcesContent":["import axios from 'axios';\nimport React, {useEffect,useState} from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Topbar from \"../components/Topbar\"\nimport '../css/feedback.css'\nimport ReferenceListElement from '../components/ReferenceListElement';\nimport LabelCorrection from '../components/LabelCorrection';\nimport labels from '../labels.json' ;\n\nexport default function Feedback(){\n    \n    const location = useLocation();\n    //ewentualne zaznaczone wcześniej zapisy\n    const listOfkeys = new URLSearchParams(location.search).get('keys');\n    //wszystkie elementy z localstorage\n    const items = \n        Object.fromEntries(\n        Object.entries({...localStorage})\n        .filter(([k,v])=>/\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k))//tylko elementy reprezentujące analizę tekstu\n        .map(([key, value]) => [key, JSON.parse(value)])\n    );\n\n    //niedodane do opinni zapisy\n    //domyślnie wszystkie elementy z items, ale jeśli było przekierowanie z /history\n    //lista będzie pomnijeszona o wybrane elementy\n    const [itemsToAdd, setItemsToAdd] = useState(\n        listOfkeys == undefined?Object.entries(items):Object.entries(items).filter(([key,val])=>!listOfkeys.includes(key))\n    )\n\n    //zapisy, których ma dotyczyć opinia\n    //domyślnie pusta lista, ale jeśli było przekierowanie z /history\n    //lista będzie zawierać wybrane elementy\n    const [addedItems, setAddedItems] = useState(    \n        listOfkeys == undefined?[]:Object.entries(items).filter(([key,val])=>listOfkeys.includes(key))\n    )\n    \n    //poprawione przez użytkownika wyniki\n    const [selectedEmotions, setSelectedEmotions] = useState([])\n    const [selectedlanguage, setSelectedLanguage] = useState([])\n    const [selectedToxic, setSelectedToxic] = useState([])\n    const [selectedSentiment, setSelectedSentiment] = useState([])\n\n    //komentarz od użytkownika\n    const [inputText, setInpuText] = useState('')\n\n    //odpowiedź od serwera\n    const [status, setStatus]=useState({})\n\n    //przesłanie opinii\n    async function send(e){ \n        e.preventDefault()\n        document.body.style.cursor = 'wait'\n        if(addedItems.length>0){\n            const feedback = {\n                references: addedItems.map((x)=>{\n                    return {text:x[1].t, results:x[1].r}}),\n                opinion:inputText,\n                corrected:{\n                   toxic: selectedToxic,\n                   sentiment: selectedSentiment,\n                   emotion: selectedEmotions,\n                   language: selectedlanguage\n                }\n            }\n\n            try {\n                const response = await axios.post('http://localhost:8000/save-feedback',feedback);\n                setStatus(response.data); \n                \n                addedItems.forEach((item)=>{\n                    item[1].f = 1\n                    localStorage.setItem(item[0],JSON.stringify(item[1]))\n                })\n\n\n            } catch (error) {\n                setStatus({success:false,message:error.message});\n            }\n        }\n        else{\n            setStatus({success:false, message:'nie zaznaczono tekstu'})\n        }\n        \n        document.body.style.cursor = 'default'\n        \n\n    }\n\n    //ustawienie wyników klasyfikacji na takie, jakie zostały orginalnie otrzymane\n    //trzeba je zmienić za każdym razem, kiedy na liście analiz do recenzji znajdzie się\n    //tylko jeden element \n    function setInitialState(list){\n        setSelectedEmotions(\n            list[1].r.emotions?\n            list[1].r.emotions.filter((x)=>x[1]>0.1).map((x)=>x[0])\n            :[]\n        )\n        setSelectedLanguage(list[1].r.language[0][0])\n        setSelectedSentiment(list[1].r.sentiment[0][0])\n        setSelectedToxic(list[1].r.toxic>0.5?'toxic':'non-toxic')  \n    }\n    \n    //jeśli był wybrany jeden element z historii, a następnie przekierowanie do /feedback\n    //trzeba ustawić jego wyniki klasyfikacji\n    useEffect(()=>{\n        if(listOfkeys != undefined){\n            if (listOfkeys.length === 1){\n                setInitialState(addedItems[0])\n            }\n        }\n    },[])\n\n    //użytkownik wybiera element z listy dotychczasowych analiz\n    function handlePick(e){\n        const key=e.target.value\n        const len = addedItems.length\n        setAddedItems([...addedItems,[key,items[key]]])\n        setItemsToAdd(itemsToAdd.filter((x)=>x[0] !== key))   \n\n        if(len+1===1){\n            setInitialState([key,items[key]])\n        }\n    };\n\n    //użytkownik usuwa element z listy analiz do recenzji\n    function handleremove(key){\n        const len = addedItems.length\n        const newList = addedItems.filter((x)=>x[0] !== key)\n        setItemsToAdd([...itemsToAdd,[key,items[key]]])\n        setAddedItems(newList)\n        if(len-1===1){\n            setInitialState(newList[0])   \n        }\n    };\n\n    //do korekty emocji - zaznaczenie lub odznaczenie elementu z listy emocji, które powinny być\n    //wynikiem analizy, ale zostały błędnie wybrane lub pominięte\n    function handleCheckbox(key,value){\n        if (value) {\n            setSelectedEmotions([...selectedEmotions, key]);\n        } else {\n            setSelectedEmotions(selectedEmotions.filter((item) => item !== key));\n        }\n    };\n\n\n    const textListStyle=[\n        {\n            color:'black'\n        },\n        {\n            color:'#505050'\n        }\n    ]\n\n\n    return(\n        <div className='App'>\n            <Topbar/>\n            <div className='content'>\n                <div className='feedback-left'>\n                    <div className='reference'>\n                        <select className='text-list' onChange={handlePick} size={5} >\n                            {itemsToAdd.map((x)=><option key={x[0]} value={x[0]} style={textListStyle[x[1].f]}>{x[1].t.slice(0,70)+'...'}</option>)}\n                        </select>\n                        <ul>\n                            {addedItems.map((x)=><ReferenceListElement key={x[0]} text={x[1].t} record_key={x[0]} onRemove={handleremove}/>)}                           \n                        </ul>\n                    </div>              \n                </div>\n                \n                <div className='feedback-right'>\n                    {addedItems.length === 1 && \n                    <div className='correction'>    \n                        \n                        <b>klasyfikacja: </b> \n                        <table>\n                            <tbody>\n                                <tr className=\"label-correction\"><th>kategoria</th><th>klasyfikacja</th><th>korekcja</th></tr>\n                                <LabelCorrection category='language' label={addedItems[0][1].r.language[0][0]} \n                                                labels={labels.language} multichoice={false}\n                                                handleChange={setSelectedLanguage}/>\n\n                                <LabelCorrection category='toxic?' \n                                                label={addedItems[0][1].r.toxic>0.5?'toxic':'non-toxic'} \n                                                labels={labels.toxic} multichoice={false}\n                                                handleChange={setSelectedToxic}/>\n\n                                <LabelCorrection category='sentiment'\n                                                label={addedItems[0][1].r.sentiment[0][0]} \n                                                labels={labels.sentiment} multichoice={false}\n                                                handleChange={setSelectedSentiment}/>\n                                                \n\n                                <LabelCorrection category='emotion'\n                                                label={addedItems[0][1].r.emotions?addedItems[0][1].r.emotions.filter((x)=>x[1]>0.1).map((x)=>x[0]):[]} \n                                                labels={labels.emotion} multichoice={true}  \n                                                handleChange={handleCheckbox} selected={selectedEmotions}/>\n                            </tbody>\n                        </table>\n                        \n\n                    </div>}\n                    {addedItems.length !== 1 && \n                    <div className='correction'>\n                        <p >\n                            Dla zaznaczonego jednego elementu można zasugerować bardziej pasujące klasyfikacje. \n                            Jeśli chcesz przesłać opinię dotyczącą kilku tekstów, możesz później poprawić każdy z nich z osobna.\n                        </p>\n                    </div>}\n                    <div className='opinion'>\n                        <b>Komentarz:</b>\n                        <textarea value={inputText} onChange={(e)=>setInpuText(e.target.value)}></textarea>\n                    </div>\n                    <button className='send-button' onClick={send}>send</button>\n                    <p>{status.message&&status.message}</p>\n                </div>\n                <div className='clearfix'></div>\n            </div>\n        </div>\n    )\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}