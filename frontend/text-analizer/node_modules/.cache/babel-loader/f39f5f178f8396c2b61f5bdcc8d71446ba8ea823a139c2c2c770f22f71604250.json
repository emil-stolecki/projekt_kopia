{"ast":null,"code":"var _jsxFileName = \"/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/History.js\",\n  _s = $RefreshSig$();\nimport ShortUniqueId from 'short-unique-id';\nimport React, { useState } from 'react';\nimport '../css/history.css';\nimport { useNavigate } from 'react-router-dom';\nimport HistoryElement from '../components/HistoryElement';\nimport Topbar from '../components/Topbar';\nimport Tutorial from '../components/Tutorial';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function History() {\n  _s();\n  console.log({\n    ...localStorage\n  });\n  const navigate = useNavigate();\n  //zapisy poprzednich analiz z localstorage\n  const [items, updateItems] = useState(Object.entries({\n    ...localStorage\n  }).filter(([k, v]) => /\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)));\n  //czy została wywołana funkcja zaznaczająca wszystkie pozycje? albo odznaczająca?\n  const [selectedAll, setselectedAll] = useState(false);\n  //lista stanów zaznaczenia wszystkich elementów\n  const [selected, setSelected] = useState([]);\n  const [shouldTutorialRun, setShoulTutorialdRun] = useState(localStorage.getItem('tutorial') !== \"ok\"); //ok znaczy, że tutorial został ukończony lub pominięty\n  //funkcja obliczająca zajęte miejsce w local storage na podstawie ilości znaków\n  const calculateUsedSpace = () => {\n    let allStrings = '';\n    for (let i = 0; i < items.length; i++) {\n      allStrings += items[i][0] + items[i][1];\n    }\n    //1 znak  = 2 bajty \n    //1KB = 1024 bajty, 1MB = 1024 KB\n    return allStrings.length * 2 / 1024 / 1024;\n  };\n\n  //obecna zajętość pamięci\n  const [usedSpace, setUsedSpace] = useState(calculateUsedSpace);\n\n  //funkcja przekazana do wszystkich elementów, aktualizująca stan zaznaczenia\n  function handleChange(key, value) {\n    if (value) {\n      setSelected([...selected, key]);\n    } else {\n      setSelected(selected.filter(item => item !== key));\n    }\n  }\n  ;\n\n  //zaznacza lub odznacza wszystkie pozycja\n  function selectDeselectAll() {\n    const state = selectedAll;\n    if (state) {\n      setSelected([]);\n      setselectedAll(false);\n    } else {\n      setSelected(Object.keys({\n        ...localStorage\n      }).filter(k => /\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)));\n      setselectedAll(true);\n    }\n  }\n\n  //usuwa zaznaczone elementy\n  function deleteSelected() {\n    selected.forEach(key => localStorage.removeItem(key));\n    updateItems(Object.entries({\n      ...localStorage\n    }).filter(([k, v]) => /\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)));\n    setUsedSpace(calculateUsedSpace);\n  }\n\n  //przekieruje do strony do przesyłania opinii z zaznaczonymi elementami\n  function sendFeedback() {\n    navigate(`/feedback?keys=${encodeURIComponent(selected)}`);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Topbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: selectDeselectAll,\n        children: selectedAll ? 'Odznacz wszystko' : 'Zaznacz wszystko'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: deleteSelected,\n        children: \"Usu\\u0144 zaznaczone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: sendFeedback,\n        children: \"Prze\\u015Blij opini\\u0119\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: 'zajęte miejsce: ' + usedSpace.toFixed(3) + ' MB'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clearfix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: items.map(x => /*#__PURE__*/_jsxDEV(HistoryElement, {\n          record_key: x[0],\n          value: x[1],\n          selected: selected.includes(x[0]),\n          handleChange: handleChange\n        }, x[0], false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 37\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), shouldTutorialRun && /*#__PURE__*/_jsxDEV(Tutorial, {\n      shouldRun: shouldTutorialRun,\n      onFinish: () => setShoulTutorialdRun(false),\n      other: {\n        updateitems: updateItems\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 35\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n_s(History, \"AMsFog8TN3XV7pwPWiDB5aW8OU0=\", false, function () {\n  return [useNavigate];\n});\n_c = History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["ShortUniqueId","React","useState","useNavigate","HistoryElement","Topbar","Tutorial","jsxDEV","_jsxDEV","History","_s","console","log","localStorage","navigate","items","updateItems","Object","entries","filter","k","v","test","selectedAll","setselectedAll","selected","setSelected","shouldTutorialRun","setShoulTutorialdRun","getItem","calculateUsedSpace","allStrings","i","length","usedSpace","setUsedSpace","handleChange","key","value","item","selectDeselectAll","state","keys","deleteSelected","forEach","removeItem","sendFeedback","encodeURIComponent","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","toFixed","map","x","record_key","includes","shouldRun","onFinish","other","updateitems","_c","$RefreshReg$"],"sources":["/home/emil/github/projektDyplomowy/projekt_kopia/frontend/text-analizer/src/pages/History.js"],"sourcesContent":["import ShortUniqueId from 'short-unique-id';\nimport React, { useState} from 'react';\nimport '../css/history.css'\nimport { useNavigate } from 'react-router-dom';\nimport HistoryElement from '../components/HistoryElement';\nimport Topbar from '../components/Topbar';\nimport Tutorial from '../components/Tutorial';\n\nexport default function History(){\n    console.log({...localStorage})\n    const navigate = useNavigate();\n    //zapisy poprzednich analiz z localstorage\n    const [items,updateItems] = useState(\n        Object.entries({...localStorage})\n        .filter(([k,v])=>/\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)));\n    //czy została wywołana funkcja zaznaczająca wszystkie pozycje? albo odznaczająca?\n    const [selectedAll,setselectedAll] = useState(false)\n    //lista stanów zaznaczenia wszystkich elementów\n    const [selected,setSelected] = useState([])\n    const [shouldTutorialRun,setShoulTutorialdRun] = useState(localStorage.getItem('tutorial')!==\"ok\")//ok znaczy, że tutorial został ukończony lub pominięty\n    //funkcja obliczająca zajęte miejsce w local storage na podstawie ilości znaków\n    const calculateUsedSpace = () => {\n        let allStrings = '';\n        for (let i=0; i<items.length; i++) {\n          \n          allStrings += (items[i][0]+items[i][1]);\n        }\n        //1 znak  = 2 bajty \n        //1KB = 1024 bajty, 1MB = 1024 KB\n        return ((allStrings.length * 2) / 1024 / 1024);\n    };\n\n    //obecna zajętość pamięci\n    const [usedSpace,setUsedSpace] = useState(calculateUsedSpace)\n    \n    //funkcja przekazana do wszystkich elementów, aktualizująca stan zaznaczenia\n    function handleChange(key,value){\n        if (value) {\n            setSelected([...selected, key]);\n        } else {\n            setSelected(selected.filter((item) => item !== key));\n        }\n    };\n\n    //zaznacza lub odznacza wszystkie pozycja\n    function selectDeselectAll(){\n        const state = selectedAll\n        if (state) {\n            setSelected([])\n            setselectedAll(false)\n        }\n        else {\n            setSelected(Object.keys({ ...localStorage }).filter((k)=>/\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)))\n            setselectedAll(true)\n        }\n    }\n\n    //usuwa zaznaczone elementy\n    function deleteSelected(){\n        selected.forEach((key) => localStorage.removeItem(key))\n        updateItems(Object.entries({ ...localStorage }).filter(([k,v])=>/\\d{1,2}-\\d{1,2}-[A-Za-z]/g.test(k)))\n        setUsedSpace(calculateUsedSpace)\n    }\n\n    //przekieruje do strony do przesyłania opinii z zaznaczonymi elementami\n    function sendFeedback(){\n        navigate(`/feedback?keys=${encodeURIComponent(selected)}`)\n    }\n\n    return(\n        <div className='App'>\n            <Topbar/>\n            <div className='menu'>\n                <button className=\"menu-button\" onClick={selectDeselectAll}>{selectedAll?'Odznacz wszystko':'Zaznacz wszystko'}</button>\n                <button className=\"menu-button\" onClick={deleteSelected}>Usuń zaznaczone</button>\n                <button className=\"menu-button\" onClick={sendFeedback}>Prześlij opinię</button>\n                <p>{'zajęte miejsce: ' + usedSpace.toFixed(3) + ' MB'}</p>\n                <div className='clearfix'></div>\n            </div>\n            <div className='content'>\n                <ul>\n                    {items.map((x)=><HistoryElement key={x[0]} record_key={x[0]} value={x[1]} \n                    selected={selected.includes(x[0])} handleChange={handleChange}/>)}\n                </ul>\n                \n            </div>\n            {shouldTutorialRun && <Tutorial shouldRun={shouldTutorialRun} onFinish={()=>setShoulTutorialdRun(false)} \n         other={{updateitems:updateItems}}/>}\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}